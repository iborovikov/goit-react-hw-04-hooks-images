(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={Overlay:"modal_Overlay__1v_L8",Modal:"modal_Modal__zqMF5"}},15:function(e,t,a){e.exports={Button:"button_Button__2LU02"}},4:function(e,t,a){e.exports={Searchbar:"searchBar_Searchbar__1qMpb",SearchForm:"searchBar_SearchForm__3NuOt",SearchFormButton:"searchBar_SearchFormButton__1HVBI",SearchFormButtonLabel:"searchBar_SearchFormButtonLabel__3g30E",SearchFormInput:"searchBar_SearchFormInput__3UMk8"}},40:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a(13),n=a.n(c),o=a(9),s=a(12),u=a(2),l=a(14),i=a.n(l);a(40);var m=a(4),b=a.n(m),d=a(0);var p=function(e){var t=e.onSubmit,a=Object(r.useState)(""),c=Object(o.a)(a,2),n=c[0],s=c[1];return Object(d.jsx)("header",{className:b.a.Searchbar,children:Object(d.jsxs)("form",{className:b.a.SearchForm,onSubmit:function(e){e.preventDefault(),t(n)},children:[Object(d.jsx)("button",{type:"submit",className:b.a.SearchFormButton,children:Object(d.jsx)("span",{className:b.a.SearchFormButtonLabel,children:"Search"})}),Object(d.jsx)("input",{className:b.a.SearchFormInput,type:"text",value:n,onChange:function(e){s(e.currentTarget.value)},autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})},j=a(6),g=a.n(j),h=function(e){var t=e.webformatURL,a=e.tags;return Object(d.jsx)("img",{src:t,alt:a,className:g.a.ImageGalleryItemImage})},y=h;h.defaultProps={tags:"picture"};var O=function(e){var t=e.pictures,r=e.openLargeImg,c=a(42);return Object(d.jsx)("ul",{className:g.a.ImageGallery,children:t&&t.map((function(e){return Object(d.jsx)("li",{className:g.a.ImageGalleryItem,onClick:function(){return r(e.id)},children:Object(d.jsx)(y,{webformatURL:e.webformatURL,tags:e.tags})},c.generate())}))})},f=a(15),v=a.n(f),_=function(e){var t=e.setPageNumber;return Object(d.jsx)("button",{type:"button",className:v.a.Button,onClick:function(){return t({type:"setPageNumber"})},children:"Load more"})},x=a(11),I=a.n(x);var N=function(e){var t=e.closeModal,a=e.pictureData,c=a.largeImageURL,n=a.tags;Object(r.useEffect)((function(){window.addEventListener("keydown",o)}));var o=function e(a){"Escape"===a.code&&(window.removeEventListener("keydown",e),t({type:"toggleModal"}))};return Object(d.jsx)("div",{className:I.a.Overlay,onClick:function(e){e.target===e.currentTarget&&(window.removeEventListener("keydown",o),t({type:"toggleModal"}))},children:Object(d.jsx)("div",{className:I.a.Modal,children:Object(d.jsx)("img",{src:c,alt:n})})})},S={pictures:[],status:"idle",showModal:!1,largeImg:null,query:"",pageNumber:1,error:"Nothing found"};function w(e,t){switch(t.type){case"setPicture":return Object(u.a)(Object(u.a)({},e),{},{pictures:[].concat(Object(s.a)(e.pictures),Object(s.a)(t.payload))});case"resetPicture":return Object(u.a)(Object(u.a)({},e),{},{pictures:[]});case"setStatus":return Object(u.a)(Object(u.a)({},e),{},{status:t.payload});case"toggleModal":return Object(u.a)(Object(u.a)({},e),{},{showModal:!e.showModal});case"setLargeImg":return Object(u.a)(Object(u.a)({},e),{},{largeImg:t.payload});case"setQuery":return Object(u.a)(Object(u.a)({},e),{},{query:t.payload});case"setPageNumber":return Object(u.a)(Object(u.a)({},e),{},{pageNumber:e.pageNumber+1});case"resetPageNumber":return Object(u.a)(Object(u.a)({},e),{},{pageNumber:1});case"setError":return Object(u.a)(Object(u.a)({},e),{},{error:t.payload});default:console.log("unexpected action type ".concat(t.type))}}var L=function(){var e=Object(r.useReducer)(w,S),t=Object(o.a)(e,2),a=t[0],c=t[1],n=Object(r.useRef)(!0),s=a.pictures,u=a.status,l=a.showModal,m=a.largeImg,b=a.query,j=a.pageNumber,g=a.error;Object(r.useEffect)((function(){n.current?n.current=!1:(c({type:"setStatus",payload:"pending"}),function(e,t){return fetch("".concat("https://pixabay.com/api/","?q=").concat(e,"&page=").concat(t,"&key=").concat("23129863-59f8a41eed57593cb3097b5c2","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.json()}))}(b,j).then((function(e){c({type:"setStatus",payload:"resolved"}),c({type:"setPicture",payload:e.hits}),j>1&&h()})).catch((function(e){c({type:"setError",payload:e}),c({type:"setStatus",payload:"rejected"})})))}),[b,j]);var h=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},y=function(e){c({type:"resetPicture"}),c({type:"resetPageNumber"}),c({type:"setQuery",payload:e})};return"idle"===u?Object(d.jsx)("div",{className:"container",children:Object(d.jsx)(p,{onSubmit:y})}):"pending"===u||"resolved"===u?Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(p,{onSubmit:y}),Object(d.jsx)(O,{pictures:s,openLargeImg:function(e){var t=s.find((function(t){return t.id===e}));c({type:"setLargeImg",payload:t}),c({type:"toggleModal"})}}),"resolved"===u?Object(d.jsx)(_,{setPageNumber:c}):Object(d.jsx)("div",{className:"loader",children:Object(d.jsx)(i.a,{type:"ThreeDots",color:"#3f51b5",height:80,width:80})}),l&&Object(d.jsx)(N,{closeModal:c,pictureData:m})]}):"rejected"===u?Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(p,{onSubmit:y}),Object(d.jsxs)("h1",{children:["Warning: ",g]})]}):void 0};a(51);n.a.render(Object(d.jsx)(L,{}),document.getElementById("root"))},6:function(e,t,a){e.exports={ImageGallery:"imageGallery_ImageGallery__16Yqr",ImageGalleryItem:"imageGallery_ImageGalleryItem__x4J5C",ImageGalleryItemImage:"imageGallery_ImageGalleryItemImage__2NUye"}}},[[52,1,2]]]);
//# sourceMappingURL=main.8056e9dd.chunk.js.map